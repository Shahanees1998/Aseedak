"use strict";(()=>{var e={};e.id=5381,e.ids=[5381],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2413:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>c,routeModule:()=>g,serverHooks:()=>p,staticGenerationAsyncStorage:()=>d});var o={};t.r(o),t.d(o,{POST:()=>u});var n=t(3277),a=t(5265),s=t(5356),i=t(7076);!function(){var e=Error("Cannot find module '@prisma/client'");throw e.code="MODULE_NOT_FOUND",e}();let l=Object(function(){var e=Error("Cannot find module '@prisma/client'");throw e.code="MODULE_NOT_FOUND",e}())();async function u(e){try{let{hotelSlug:r,reviewId:t}=await e.json();if(!r||!t)return i.NextResponse.json({error:"Hotel slug and review ID are required"},{status:400});let o=await l.hotel.findUnique({where:{slug:r},select:{id:!0,name:!0,address:!0,city:!0,state:!0,country:!0}});if(!o)return i.NextResponse.json({error:"Hotel not found"},{status:404});let n=await l.review.findUnique({where:{id:t},select:{id:!0,overallRating:!0,responses:!0,guestName:!0}});if(!n)return i.NextResponse.json({error:"Review not found"},{status:404});let a=`${o.name} ${o.city} ${o.state} ${o.country}`,s=`https://www.google.com/search?q=${encodeURIComponent(a)}&tbm=lcl`,u=`https://search.google.com/local/writereview?placeid=${o.id}`;return await l.review.update({where:{id:t},data:{sharedOnGoogle:!0,externalUrls:{google:s,googleMyBusiness:u}}}),i.NextResponse.json({message:"Google sharing URLs generated successfully",urls:{googleReviews:s,googleMyBusiness:u},hotel:{name:o.name,location:`${o.city}, ${o.state}, ${o.country}`},review:{rating:n.overallRating,guestName:n.guestName}})}catch(e){return console.error("Error generating Google sharing URLs:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let g=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/external-sharing/google/route",pathname:"/api/external-sharing/google",filename:"route",bundlePath:"app/api/external-sharing/google/route"},resolvedPagePath:"/Users/mac/Documents/primochatadmin/hotel-feedback-saas/app/api/external-sharing/google/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:p}=g,h="/api/external-sharing/google/route";function m(){return(0,s.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:d})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[916,3786],()=>t(2413));module.exports=o})();