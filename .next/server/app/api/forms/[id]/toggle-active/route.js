"use strict";(()=>{var e={};e.id=6587,e.ids=[6587],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7589:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>O,patchFetch:()=>v,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f});var o={};t.r(o),t.d(o,{PUT:()=>c});var n=t(3277),a=t(5265),i=t(5356),s=t(7076);(function(){var e=Error("Cannot find module 'next-auth'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@prisma/client'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}();let d=Object(function(){var e=Error("Cannot find module '@prisma/client'");throw e.code="MODULE_NOT_FOUND",e}())(),u=Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).object({isActive:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).boolean()});async function c(e,{params:r}){try{let t=await Object(function(){var e=Error("Cannot find module 'next-auth'");throw e.code="MODULE_NOT_FOUND",e}())();if(!t||t.user?.role!=="HOTEL_ADMIN"||!t.user?.hotelId)return s.NextResponse.json({error:"Unauthorized"},{status:401});let o=await e.json(),n=u.parse(o),{id:a}=r;if(!await d.form.findFirst({where:{id:a,hotelId:t.user.hotelId}}))return s.NextResponse.json({error:"Form not found"},{status:404});let i=await d.form.update({where:{id:a},data:{isActive:n.isActive},select:{id:!0,name:!0,isActive:!0}});return s.NextResponse.json({message:`Form ${n.isActive?"activated":"deactivated"} successfully`,form:i})}catch(e){if(console.error("Error toggling form active status:",e),e instanceof Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).ZodError)return s.NextResponse.json({error:"Validation error",details:e.errors},{status:400});return s.NextResponse.json({error:"Internal server error"},{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/forms/[id]/toggle-active/route",pathname:"/api/forms/[id]/toggle-active",filename:"route",bundlePath:"app/api/forms/[id]/toggle-active/route"},resolvedPagePath:"/Users/mac/Documents/primochatadmin/hotel-feedback-saas/app/api/forms/[id]/toggle-active/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:f,serverHooks:m}=l,O="/api/forms/[id]/toggle-active/route";function v(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:f})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[916,3786],()=>t(7589));module.exports=o})();