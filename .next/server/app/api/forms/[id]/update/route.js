"use strict";(()=>{var r={};r.id=7193,r.ids=[7193],r.modules={399:r=>{r.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:r=>{r.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2004:(r,e,o)=>{o.r(e),o.d(e,{originalPathname:()=>m,patchFetch:()=>E,requestAsyncStorage:()=>l,routeModule:()=>O,serverHooks:()=>p,staticGenerationAsyncStorage:()=>f});var t={};o.r(t),o.d(t,{PUT:()=>c});var n=o(3277),d=o(5265),a=o(5356),i=o(7076);(function(){var r=Error("Cannot find module 'next-auth'");throw r.code="MODULE_NOT_FOUND",r})(),function(){var r=Error("Cannot find module '@prisma/client'");throw r.code="MODULE_NOT_FOUND",r}(),function(){var r=Error("Cannot find module 'zod'");throw r.code="MODULE_NOT_FOUND",r}();let u=Object(function(){var r=Error("Cannot find module '@prisma/client'");throw r.code="MODULE_NOT_FOUND",r}())(),s=Object(function(){var r=Error("Cannot find module 'zod'");throw r.code="MODULE_NOT_FOUND",r}()).object({name:Object(function(){var r=Error("Cannot find module 'zod'");throw r.code="MODULE_NOT_FOUND",r}()).string().min(1,"Name is required"),description:Object(function(){var r=Error("Cannot find module 'zod'");throw r.code="MODULE_NOT_FOUND",r}()).string().optional(),fields:Object(function(){var r=Error("Cannot find module 'zod'");throw r.code="MODULE_NOT_FOUND",r}()).array(Object(function(){var r=Error("Cannot find module 'zod'");throw r.code="MODULE_NOT_FOUND",r}()).object({id:Object(function(){var r=Error("Cannot find module 'zod'");throw r.code="MODULE_NOT_FOUND",r}()).string().optional(),label:Object(function(){var r=Error("Cannot find module 'zod'");throw r.code="MODULE_NOT_FOUND",r}()).string().min(1,"Label is required"),type:Object(function(){var r=Error("Cannot find module 'zod'");throw r.code="MODULE_NOT_FOUND",r}()).enum(["TEXT","TEXTAREA","RATING","MULTIPLE_CHOICE","SINGLE_CHOICE","EMAIL","PHONE","FILE_UPLOAD"]),required:Object(function(){var r=Error("Cannot find module 'zod'");throw r.code="MODULE_NOT_FOUND",r}()).boolean(),placeholder:Object(function(){var r=Error("Cannot find module 'zod'");throw r.code="MODULE_NOT_FOUND",r}()).string().optional(),options:Object(function(){var r=Error("Cannot find module 'zod'");throw r.code="MODULE_NOT_FOUND",r}()).array(Object(function(){var r=Error("Cannot find module 'zod'");throw r.code="MODULE_NOT_FOUND",r}()).string()).optional(),order:Object(function(){var r=Error("Cannot find module 'zod'");throw r.code="MODULE_NOT_FOUND",r}()).number()}))});async function c(r,{params:e}){try{let o=await Object(function(){var r=Error("Cannot find module 'next-auth'");throw r.code="MODULE_NOT_FOUND",r}())();if(!o||o.user?.role!=="HOTEL_ADMIN"||!o.user?.hotelId)return i.NextResponse.json({error:"Unauthorized"},{status:401});let t=await r.json(),n=s.parse(t),{id:d}=e;if(!await u.form.findFirst({where:{id:d,hotelId:o.user.hotelId}}))return i.NextResponse.json({error:"Form not found"},{status:404});let a=await u.form.update({where:{id:d},data:{name:n.name,description:n.description,fields:{deleteMany:{},create:n.fields.map(r=>({label:r.label,type:r.type,required:r.required,placeholder:r.placeholder,options:r.options,order:r.order}))}},include:{fields:{orderBy:{order:"asc"}}}});return i.NextResponse.json({message:"Form updated successfully",form:a})}catch(r){if(console.error("Error updating form:",r),r instanceof Object(function(){var r=Error("Cannot find module 'zod'");throw r.code="MODULE_NOT_FOUND",r}()).ZodError)return i.NextResponse.json({error:"Validation error",details:r.errors},{status:400});return i.NextResponse.json({error:"Internal server error"},{status:500})}}let O=new n.AppRouteRouteModule({definition:{kind:d.x.APP_ROUTE,page:"/api/forms/[id]/update/route",pathname:"/api/forms/[id]/update",filename:"route",bundlePath:"app/api/forms/[id]/update/route"},resolvedPagePath:"/Users/mac/Documents/primochatadmin/hotel-feedback-saas/app/api/forms/[id]/update/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:l,staticGenerationAsyncStorage:f,serverHooks:p}=O,m="/api/forms/[id]/update/route";function E(){return(0,a.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:f})}}};var e=require("../../../../../webpack-runtime.js");e.C(r);var o=r=>e(e.s=r),t=e.X(0,[916,3786],()=>o(2004));module.exports=t})();