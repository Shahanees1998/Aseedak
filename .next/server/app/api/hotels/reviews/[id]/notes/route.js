"use strict";(()=>{var e={};e.id=1348,e.ids=[1348],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4036:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>O,patchFetch:()=>f,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h});var o={};t.r(o),t.d(o,{PUT:()=>c});var n=t(3277),s=t(5265),a=t(5356),i=t(7076);(function(){var e=Error("Cannot find module 'next-auth'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@prisma/client'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}();let d=Object(function(){var e=Error("Cannot find module '@prisma/client'");throw e.code="MODULE_NOT_FOUND",e}())(),u=Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).object({adminNotes:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).string().optional()});async function c(e,{params:r}){try{let t=await Object(function(){var e=Error("Cannot find module 'next-auth'");throw e.code="MODULE_NOT_FOUND",e}())();if(!t||t.user?.role!=="HOTEL_ADMIN"||!t.user?.hotelId)return i.NextResponse.json({error:"Unauthorized"},{status:401});let o=await e.json(),n=u.parse(o),{id:s}=r;if(!await d.review.findFirst({where:{id:s,hotelId:t.user.hotelId}}))return i.NextResponse.json({error:"Review not found"},{status:404});let a=await d.review.update({where:{id:s},data:{adminNotes:n.adminNotes,adminId:t.user.id},select:{id:!0,adminNotes:!0}});return i.NextResponse.json({message:"Admin notes updated successfully",review:a})}catch(e){if(console.error("Error updating admin notes:",e),e instanceof Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).ZodError)return i.NextResponse.json({error:"Validation error",details:e.errors},{status:400});return i.NextResponse.json({error:"Internal server error"},{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/hotels/reviews/[id]/notes/route",pathname:"/api/hotels/reviews/[id]/notes",filename:"route",bundlePath:"app/api/hotels/reviews/[id]/notes/route"},resolvedPagePath:"/Users/mac/Documents/primochatadmin/hotel-feedback-saas/app/api/hotels/reviews/[id]/notes/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:h,serverHooks:m}=l,O="/api/hotels/reviews/[id]/notes/route";function f(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[916,3786],()=>t(4036));module.exports=o})();