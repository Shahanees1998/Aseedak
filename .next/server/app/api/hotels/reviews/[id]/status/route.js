"use strict";(()=>{var e={};e.id=2914,e.ids=[2914],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2965:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>O});var o={};r.r(o),r.d(o,{PUT:()=>c});var s=r(3277),n=r(5265),a=r(5356),i=r(7076);(function(){var e=Error("Cannot find module 'next-auth'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@prisma/client'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}();let u=Object(function(){var e=Error("Cannot find module '@prisma/client'");throw e.code="MODULE_NOT_FOUND",e}())(),d=Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).object({status:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).enum(["PENDING","APPROVED","REJECTED","SHARED_EXTERNALLY"])});async function c(e,{params:t}){try{let r=await Object(function(){var e=Error("Cannot find module 'next-auth'");throw e.code="MODULE_NOT_FOUND",e}())();if(!r||r.user?.role!=="HOTEL_ADMIN"||!r.user?.hotelId)return i.NextResponse.json({error:"Unauthorized"},{status:401});let o=await e.json(),s=d.parse(o),{id:n}=t;if(!await u.review.findFirst({where:{id:n,hotelId:r.user.hotelId}}))return i.NextResponse.json({error:"Review not found"},{status:404});let a=await u.review.update({where:{id:n},data:{status:s.status,adminId:r.user.id},select:{id:!0,status:!0,guestName:!0}});return i.NextResponse.json({message:"Review status updated successfully",review:a})}catch(e){if(console.error("Error updating review status:",e),e instanceof Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}()).ZodError)return i.NextResponse.json({error:"Validation error",details:e.errors},{status:400});return i.NextResponse.json({error:"Internal server error"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/hotels/reviews/[id]/status/route",pathname:"/api/hotels/reviews/[id]/status",filename:"route",bundlePath:"app/api/hotels/reviews/[id]/status/route"},resolvedPagePath:"/Users/mac/Documents/primochatadmin/hotel-feedback-saas/app/api/hotels/reviews/[id]/status/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:O,serverHooks:h}=l,f="/api/hotels/reviews/[id]/status/route";function v(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:O})}}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[916,3786],()=>r(2965));module.exports=o})();