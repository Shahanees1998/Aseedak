"use strict";(()=>{var e={};e.id=4243,e.ids=[4243],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},499:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>O,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>f,staticGenerationAsyncStorage:()=>h});var o={};r.r(o),r.d(o,{GET:()=>d,PUT:()=>c});var n=r(3277),a=r(5265),i=r(5356),s=r(7076);(function(){var e=Error("Cannot find module 'next-auth'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@prisma/client'");throw e.code="MODULE_NOT_FOUND",e}();let u=Object(function(){var e=Error("Cannot find module '@prisma/client'");throw e.code="MODULE_NOT_FOUND",e}())();async function d(e,{params:t}){try{let e=await Object(function(){var e=Error("Cannot find module 'next-auth'");throw e.code="MODULE_NOT_FOUND",e}())();if(!e||e.user?.role!=="HOTEL_ADMIN"||e.user?.hotelId!==t.hotelId)return s.NextResponse.json({error:"Unauthorized"},{status:401});let r=await u.notification.findMany({where:{userId:e.user.id,isRead:!1},orderBy:{createdAt:"desc"},take:10});return s.NextResponse.json({notifications:r})}catch(e){return console.error("Error fetching notifications:",e),s.NextResponse.json({error:"Internal server error"},{status:500})}}async function c(e,{params:t}){try{let r=await Object(function(){var e=Error("Cannot find module 'next-auth'");throw e.code="MODULE_NOT_FOUND",e}())();if(!r||r.user?.role!=="HOTEL_ADMIN"||r.user?.hotelId!==t.hotelId)return s.NextResponse.json({error:"Unauthorized"},{status:401});let{notificationIds:o}=await e.json();return await u.notification.updateMany({where:{id:{in:o},userId:r.user.id},data:{isRead:!0}}),s.NextResponse.json({message:"Notifications marked as read"})}catch(e){return console.error("Error updating notifications:",e),s.NextResponse.json({error:"Internal server error"},{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/notifications/hotel/[hotelId]/route",pathname:"/api/notifications/hotel/[hotelId]",filename:"route",bundlePath:"app/api/notifications/hotel/[hotelId]/route"},resolvedPagePath:"/Users/mac/Documents/primochatadmin/hotel-feedback-saas/app/api/notifications/hotel/[hotelId]/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:h,serverHooks:f}=l,m="/api/notifications/hotel/[hotelId]/route";function O(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:h})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[916,3786],()=>r(499));module.exports=o})();